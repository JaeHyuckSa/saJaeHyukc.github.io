---
layout: post
title: 2022-10-25 화요일 TIL (세션 쿠키/토큰 JWT)
date: 2022-10-25 00:00:00 +0900
categories: [스파르타 내일배움캠프]
tags: [내일배움캠프, 스파르타코딩클럽, 코딩]
description: 스파르타 코딩클럽의 내일배움캠프 TIL입니다.
toc: true
math: true
mermaid: true
image: /assets/img/post_img/sparta_coding_fix_img/sparta_coding_club.png
---
### 1. 어떤 문제가 있었는지

세션&쿠키와 토큰&JWT가 무슨 차이가 있는지 토큰&JWT를 쓰는 것인지 이유가 궁금했다.  

공식문서와 강의에서 배웠던 내용들을 정리본이 있으면 좋겠다고 생각하여 적는다.

### 2. 내가 뭘 몰랐는지 ( + 내가 했던 시도) -> 꼭 들어가야함 / 어떻게 해결했는지

세션&쿠키에 대해서 먼저 알아보자 서버가 세션 id를 바탕으로 저장된 세션을 탐색해 요청을 보낸 유저가 맞는지 확인, 인증하게 된다.  이 방식대로 하면 HTTP요청이 가로채 졌을 때 ID와 PW가 노출되지 않는다.  세션 ID 자체는 의미있는 정보가 없다. 하지만 세션 ID를 노출되어 누군가 헤더에 넣어 요청하게 되면 이것이 같은 유저인지 확인할 방법이 없다. 보안적으로 취약하다는 점을 가지고 있다. 또한 Django에 session log가 누적되어 서버에 부하가 되어버릴 수 있다.

토큰&JWT에 대해서 알아보자. 토큰방식도 세션&쿠키와 비슷하다고 한다. 기본적인 토큰방식은 회원가입 시 유저에 매칭되는 토큰을 생성하여 저장한다. 로그인 요청이 들어오면 해당 토큰을 응답으로 보내주고 클라이언트는 이 토큰을 가지고 있다 요청을 보낼 때 헤더에 토큰을 넣어 보낸다. 서버는 요청으로 들어온 토큰이 있는지 확인하여 인증하게 된다. 

토큰이 세션&쿠키와 다른점은 토큰 자체에 사용자에 대한 정보가 있어서 서버는 토큰만으로 어떤 유저인지 구분할 수 있다. 토큰은 기본적으로 암호화 방식을 사용한다. 암호화에 필요한 키는  SECRET_KEY이다. 이 키를 노출되지만 않으면 어떤 정보도 얻어낼 수 없는 것이다. 

여기서 토큰/세션에 유효기간을 설정해주면 더욱 안전하다. 

### 3. 뭘 알았는지 -> 꼭 들어가야함

이것으로 인해 여러가지 찾아본다고 세션&쿠키/토큰&JWT에 대해서 기본 동작방식을 알아낸것 같다.